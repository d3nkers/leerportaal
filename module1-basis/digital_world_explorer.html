<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ Digital World Explorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            font-size: 2em;
            opacity: 0.1;
            animation: float 8s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .game-container {
            position: relative;
            z-index: 2;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .explorer-rank {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50, #45a049);
            height: 100%;
            transition: width 0.5s ease;
        }

        .level-navigation {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .level-nav-btn {
            background: #e0e0e0;
            border: none;
            padding: 8px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .level-nav-btn:hover {
            background: #d0d0d0;
        }

        .level-nav-btn.active {
            background: #667eea;
            color: white;
        }

        .level-nav-btn.completed {
            background: #4CAF50;
            color: white;
        }

        .level-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .content {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .start-screen {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .start-screen h2 {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 20px;
        }

        .start-screen p {
            font-size: 1.2em;
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .start-btn, .next-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .start-btn:hover, .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .level-icon {
            font-size: 6em;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .level-title {
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .explanation {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            line-height: 1.6;
        }

        .digital-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .digital-title {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
        }

        .question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .question h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .answer-btn {
            display: block;
            width: 100%;
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1em;
        }

        .answer-btn:hover {
            background: #f0f0f0;
            border-color: #667eea;
        }

        .answer-btn.correct {
            background: #d4edda;
            border-color: #4CAF50;
            color: #155724;
        }

        .answer-btn.incorrect {
            background: #f8d7da;
            border-color: #f44336;
            color: #721c24;
        }

        .question-hint {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #2196F3;
            display: none;
        }

        .retry-message {
            background: #fff3cd;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #ffc107;
            display: none;
        }

        .reward-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            z-index: 1000;
            max-width: 500px;
            width: 90%;
            text-align: center;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .reward-popup.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .reward-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .celebration {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .certificate {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            padding: 40px;
            border-radius: 15px;
            margin: 30px 0;
            border: 3px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .digital-helper-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .digital-helper-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px 10px;
            }
            
            .level-title {
                font-size: 2em;
            }

            .level-navigation {
                gap: 4px;
            }

            .level-nav-btn {
                padding: 6px 10px;
                font-size: 0.8em;
            }

            .start-screen {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Digital Elements Background -->
    <div class="floating-elements" id="floatingElements"></div>

    <div class="game-container">
        <div class="header">
            <h1>ğŸŒ Digital World Explorer</h1>
            <div class="explorer-rank" id="explorerRank">
                <span>ğŸŒ±</span>
                <span>Digital Starter</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="level-navigation" id="levelNavigation">
                <!-- Dynamic navigation buttons -->
            </div>
        </div>

        <div class="content" id="gameContent">
            <!-- Dynamic content -->
        </div>
    </div>

    <button class="digital-helper-btn" onclick="showHelper()">ğŸ¤– Help</button>

    <!-- Reward Popup -->
    <div class="reward-popup" id="rewardPopup">
        <div class="reward-icon" id="rewardIcon">ğŸ‰</div>
        <h2 id="rewardTitle" style="color: #667eea; margin-bottom: 15px;">Level Geslaagd!</h2>
        <p id="rewardText" style="font-size: 1.3em; margin-bottom: 20px;"></p>
        <p id="rewardSubText" style="color: #666; margin-bottom: 25px;"></p>
        <div id="rewardButtons"></div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <script>
        // Game state
        let currentLevel = 0;
        let completedLevels = [];
        let questionsAnswered = 0;
        let totalQuestions = 0;
        let explorerRank = 'Digital Starter';
        let questionAttempts = {};
        let gameStats = {
            startTime: new Date(),
            correctAnswers: 0,
            totalAttempts: 0,
            timeSpent: 0,
            finalTestAttempts: 0
        };

        // Explorer ranks based on progress
        const explorerRanks = [
            { min: 0, max: 0, name: "ğŸŒ± Digital Starter", icon: "ğŸŒ±" },
            { min: 1, max: 2, name: "ğŸ” Search Scout", icon: "ğŸ”" },
            { min: 3, max: 4, name: "ğŸ›¡ï¸ Safety Specialist", icon: "ğŸ›¡ï¸" },
            { min: 5, max: 6, name: "ğŸŒ Web Wanderer", icon: "ğŸŒ" },
            { min: 7, max: 8, name: "ğŸ’¡ Digital Detective", icon: "ğŸ’¡" },
            { min: 9, max: 10, name: "ğŸ† Content Captain", icon: "ğŸ†" },
            { min: 11, max: 11, name: "ğŸŒŸ Digital World Master", icon: "ğŸŒŸ" }
        ];

        // Level data
        const levels = [
            {
                id: 1,
                title: "Zoek Superheld",
                icon: "ğŸ”",
                color: "#E74C3C",
                badge: "Search Scholar",
                explanation: `<strong>ğŸ” Je wordt een zoek superheld!</strong><br>
                Je moet een spreekbeurt houden over olifanten. Je gaat zoeken op internet, maar niet alle websites hebben goede informatie! 
                <br><br>
                <strong>âœ… Goede websites:</strong> Wikipedia, Jeugdjournaal, schoolwebsites.
                <br><strong>âŒ Voorzichtige websites:</strong> Verkoopwebsites, blogs van onbekende mensen.`,
                questions: [
                    {
                        question: "Je zoekt informatie over olifanten voor een spreekbeurt. Welke website is het meest betrouwbaar?",
                        answers: [
                            { text: "ğŸ›’ Een website die olifanten knuffels verkoopt", correct: false },
                            { text: "ğŸ“š Wikipedia over olifanten", correct: true },
                            { text: "ğŸ’¬ Een blog van iemand die Ã©Ã©n keer een olifant heeft gezien", correct: false }
                        ]
                    },
                    {
                        question: "Waarom is Wikipedia meestal betrouwbaar voor schoolprojecten?",
                        answers: [
                            { text: "ğŸ¨ Omdat het mooie plaatjes heeft", correct: false },
                            { text: "ğŸ‘¥ Omdat veel experts de informatie controleren", correct: true },
                            { text: "ğŸ’° Omdat het gratis is", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 2,
                title: "Cookie Monster",
                icon: "ğŸª",
                color: "#3498DB",
                badge: "Privacy Protector",
                explanation: `<strong>ğŸª Cookies zijn niet om op te eten!</strong><br>
                Websites geven je computer kleine bestandjes (cookies) om te onthouden wie je bent. Sommige zijn nuttig, andere volgen je overal!
                <br><br>
                <strong>âœ… Goede cookies:</strong> Onthouden van je inloggegevens.
                <br><strong>âš ï¸ Vervelende cookies:</strong> Volgen waar je op klikt voor reclame.`,
                questions: [
                    {
                        question: "Een website vraagt of je cookies wilt accepteren. Wat doe je?",
                        answers: [
                            { text: "âœ… Alles accepteren - dat is makkelijker", correct: false },
                            { text: "âš™ï¸ Alleen de noodzakelijke cookies accepteren", correct: true },
                            { text: "âŒ Helemaal niks accepteren", correct: false }
                        ]
                    },
                    {
                        question: "Waarom willen websites jou cookies geven?",
                        answers: [
                            { text: "ğŸ Om aardig te zijn", correct: false },
                            { text: "ğŸ“Š Om te onthouden wat je doet en reclame te tonen", correct: true },
                            { text: "ğŸª Omdat ze lekker zijn", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 3,
                title: "Reclame Detective",
                icon: "ğŸ“º",
                color: "#F39C12",
                badge: "Ad Spotter",
                explanation: `<strong>ğŸ“º Reclame is overal!</strong><br>
                Op YouTube, spelletjes, websites - overal proberen bedrijven je dingen te verkopen. Als echte detective leer je reclame te herkennen!
                <br><br>
                <strong>ğŸ•µï¸ Reclame herkennen:</strong> Staat er 'Ad', 'Advertentie' of 'Gesponsord' bij.`,
                questions: [
                    {
                        question: "Je ziet een YouTube video over 'DE BESTE TELEFOON OOIT!' Wat denk je?",
                        answers: [
                            { text: "ğŸ“± Dit moet wel waar zijn!", correct: false },
                            { text: "ğŸ¤” Dit is waarschijnlijk reclame om telefoons te verkopen", correct: true },
                            { text: "ğŸ¬ Dit is gewoon een leuke video", correct: false }
                        ]
                    },
                    {
                        question: "Hoe herken je reclame op internet?",
                        answers: [
                            { text: "ğŸ¨ Aan de mooie kleuren", correct: false },
                            { text: "ğŸ·ï¸ Er staat 'Ad' of 'Advertentie' bij", correct: true },
                            { text: "ğŸ“¢ Als het heel hard klinkt", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 4,
                title: "Game Guardian",
                icon: "ğŸ®",
                color: "#9B59B6",
                badge: "Safe Gamer",
                explanation: `<strong>ğŸ® Veilig gamen is cool!</strong><br>
                In online games kun je met andere spelers praten. Maar niet iedereen is aardig. Jij leert hoe je veilig en leuk kunt gamen!
                <br><br>
                <strong>ğŸ›¡ï¸ Veilig gamen:</strong> Alleen over het spel praten, geen persoonlijke info delen.`,
                questions: [
                    {
                        question: "In een game vraagt iemand waar je woont. Wat antwoord je?",
                        answers: [
                            { text: "ğŸ  Ik woon in [je stad]", correct: false },
                            { text: "ğŸ® Laten we over het spel praten!", correct: true },
                            { text: "ğŸ¤ Ik vertel niks", correct: false }
                        ]
                    },
                    {
                        question: "Waarom is het belangrijk om in games alleen over het spel te praten?",
                        answers: [
                            { text: "ğŸ¯ Omdat het spel dan leuker is", correct: false },
                            { text: "ğŸ›¡ï¸ Voor je veiligheid - je weet niet wie die mensen echt zijn", correct: true },
                            { text: "ğŸ¤– Omdat de computer dat wil", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 5,
                title: "Phone Protector",
                icon: "ğŸ“±",
                color: "#1ABC9C",
                badge: "Device Defender",
                explanation: `<strong>ğŸ“± Andermans telefoon = voorzichtig!</strong><br>
                Soms mag je de telefoon of tablet van iemand anders gebruiken. Maar je mag niet zomaar overal aan zitten!
                <br><br>
                <strong>âœ… Wel okÃ©:</strong> Spelletje spelen dat je mag.
                <br><strong>âŒ Niet okÃ©:</strong> Berichten lezen, foto's bekijken, instellingen veranderen.`,
                questions: [
                    {
                        question: "Je mag de iPad van je oma gebruiken. Wat doe je NIET?",
                        answers: [
                            { text: "ğŸ® Het spelletje spelen dat ze heeft laten zien", correct: false },
                            { text: "ğŸ“¸ Haar foto's bekijken", correct: true },
                            { text: "ğŸµ Muziek luisteren", correct: false }
                        ]
                    },
                    {
                        question: "Waarom is het belangrijk om niet in andermans berichten te kijken?",
                        answers: [
                            { text: "ğŸ“± Omdat de telefoon dan kapot gaat", correct: false },
                            { text: "ğŸ¤ Omdat iedereen recht heeft op privacy", correct: true },
                            { text: "ğŸ® Omdat je dan niet kunt gamen", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 6,
                title: "YouTube Captain",
                icon: "ğŸ¤–",
                color: "#E67E22",
                badge: "Content Commander",
                explanation: `<strong>ğŸ¤– YouTube beslist wat je ziet!</strong><br>
                YouTube kijkt wat je klikt en laat dan meer van hetzelfde zien. Maar jij bent de baas over wat je kijkt!
                <br><br>
                <strong>ğŸ¯ Jij bepaalt:</strong> Zoek zelf naar leuke video's in plaats van alleen maar klikken wat YouTube voorstelt.`,
                questions: [
                    {
                        question: "YouTube laat steeds enge video's zien. Wat kun je doen?",
                        answers: [
                            { text: "ğŸ˜° Gewoon doorkijken", correct: false },
                            { text: "ğŸ” Zelf zoeken naar leuke video's", correct: true },
                            { text: "ğŸ“± De telefoon wegleggen", correct: false }
                        ]
                    },
                    {
                        question: "Waarom laat YouTube soms dezelfde soort video's zien?",
                        answers: [
                            { text: "ğŸ¤– YouTube kijkt naar wat je klikt en denkt dat je dat leuk vindt", correct: true },
                            { text: "ğŸ® Omdat er alleen die video's zijn", correct: false },
                            { text: "ğŸ‘¥ Omdat alle kinderen dat kijken", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 7,
                title: "Fake Detective",
                icon: "ğŸ•µï¸",
                color: "#2ECC71",
                badge: "Truth Seeker",
                explanation: `<strong>ğŸ•µï¸ Niet alles op internet is echt!</strong><br>
                Mensen kunnen nepfoto's maken, nepverhalen schrijven of grappen uithalen. Jij wordt een detective die het verschil ziet!
                <br><br>
                <strong>ğŸ¤” Vraag jezelf af:</strong> Lijkt dit logisch? Hebben andere websites dit ook?`,
                questions: [
                    {
                        question: "Je ziet een foto van een regenboog-eenhoorn in jullie tuin. Wat denk je?",
                        answers: [
                            { text: "ğŸ¦„ Wauw, eenhoorns bestaan echt!", correct: false },
                            { text: "ğŸ¤” Dit lijkt nep - eenhoorns bestaan niet", correct: true },
                            { text: "ğŸ“¸ Ik ga ook foto's maken", correct: false }
                        ]
                    },
                    {
                        question: "Hoe check je of iets echt is?",
                        answers: [
                            { text: "ğŸ® In een game vragen", correct: false },
                            { text: "ğŸ” Zoeken op Google of andere websites het ook hebben", correct: true },
                            { text: "ğŸ“± Gewoon geloven", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 8,
                title: "Info Guardian",
                icon: "ğŸ“Š",
                color: "#34495E",
                badge: "Privacy Pro",
                explanation: `<strong>ğŸ“Š Jouw info is waardevol!</strong><br>
                Websites vragen soms om je naam, leeftijd, adres. Maar waarom? Sommige websites hebben dit echt nodig, andere niet!
                <br><br>
                <strong>ğŸ›¡ï¸ Regel:</strong> Alleen echte info geven met toestemming van ouders.`,
                questions: [
                    {
                        question: "Een spelletjeswebsite vraagt je echte naam en adres. Wat doe je?",
                        answers: [
                            { text: "âœï¸ Invullen - ze vragen het toch", correct: false },
                            { text: "ğŸ¤” Eerst vragen waarom ze dit nodig hebben", correct: true },
                            { text: "ğŸ® Gewoon een fantasienaam gebruiken", correct: false }
                        ]
                    },
                    {
                        question: "Waarom willen websites soms je echte naam weten?",
                        answers: [
                            { text: "ğŸ Om je verrassingen te sturen", correct: false },
                            { text: "ğŸ“Š Om je gegevens te gebruiken voor reclame of andere doeleinden", correct: true },
                            { text: "ğŸ¤– Omdat computers dat nodig hebben", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 9,
                title: "Content Controller",
                icon: "ğŸ“º",
                color: "#8E44AD",
                badge: "Smart Viewer",
                explanation: `<strong>ğŸ“º Jij bent de baas over wat je kijkt!</strong><br>
                Soms zie je dingen die eng, verdrietig of vervelend zijn. Dat is niet jouw schuld! Je mag altijd stoppen met kijken.
                <br><br>
                <strong>ğŸ›¡ï¸ Onthoud:</strong> Als iets je bang of verdrietig maakt, stop dan met kijken.`,
                questions: [
                    {
                        question: "Je kijkt een video en wordt er bang van. Wat doe je?",
                        answers: [
                            { text: "â¸ï¸ Stoppen met kijken en iets anders zoeken", correct: true },
                            { text: "ğŸ˜° Doorkijken omdat ik al begonnen ben", correct: false },
                            { text: "ğŸ‘€ Kijken door mijn vingers", correct: false }
                        ]
                    },
                    {
                        question: "Hoe weet je of een video geschikt is voor jou?",
                        answers: [
                            { text: "ğŸ·ï¸ Kijken naar het leeftijdslabel", correct: true },
                            { text: "ğŸ¨ Als de kleuren mooi zijn", correct: false },
                            { text: "â­ Als er veel sterren bij staan", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 10,
                title: "Geld Guard",
                icon: "ğŸ’°",
                color: "#E91E63",
                badge: "Money Master",
                explanation: `<strong>ğŸ’° Games willen je geld!</strong><br>
                In apps en games zie je soms: 'Koop muntjes!' of 'Krijg superkrachten voor â‚¬2,99!' Dit zijn in-app aankopen. Ze lijken goedkoop, maar tellen snel op!
                <br><br>
                <strong>ğŸ® Regel:</strong> Nooit zonder toestemming van ouders kopen!`,
                questions: [
                    {
                        question: "Je speelt een gratis spel en ziet: 'Koop 100 diamanten voor â‚¬0,99!' Wat doe je?",
                        answers: [
                            { text: "ğŸ’ Kopen, het is maar 99 cent", correct: false },
                            { text: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Eerst vragen aan ouders", correct: true },
                            { text: "ğŸ® Doorgaan zonder te kopen", correct: false }
                        ]
                    },
                    {
                        question: "Waarom zijn veel games 'gratis' te downloaden?",
                        answers: [
                            { text: "ğŸ Omdat de makers aardig zijn", correct: false },
                            { text: "ğŸ’° Ze verdienen geld als je later dingen koopt in het spel", correct: true },
                            { text: "ğŸ® Omdat games maken niks kost", correct: false }
                        ]
                    }
                ]
            }
        ];

        // Initialize game
        function initGame() {
            generateFloatingElements();
            showStartScreen();
            updateLevelNavigation();
            updateExplorerRank();
            
            // Load saved progress
            const saved = localStorage.getItem('digital-explorer-progress');
            if (saved) {
                const progress = JSON.parse(saved);
                completedLevels = progress.completed || [];
                currentLevel = progress.current || 0;
                explorerRank = progress.rank || 'Digital Starter';
                gameStats = { ...gameStats, ...progress.stats };
                updateExplorerRank();
            }
        }

        function generateFloatingElements() {
            const elementsContainer = document.getElementById('floatingElements');
            const digitalIcons = ['ğŸ”', 'ğŸª', 'ğŸ“º', 'ğŸ®', 'ğŸ“±', 'ğŸ¤–', 'ğŸ•µï¸', 'ğŸ“Š', 'ğŸ’°', 'ğŸ†˜', 'ğŸŒ'];
            
            for (let i = 0; i < 15; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.textContent = digitalIcons[Math.floor(Math.random() * digitalIcons.length)];
                element.style.left = Math.random() * 100 + '%';
                element.style.top = Math.random() * 100 + '%';
                element.style.animationDelay = Math.random() * 8 + 's';
                element.style.animationDuration = (Math.random() * 4 + 6) + 's';
                elementsContainer.appendChild(element);
            }
        }

        function showStartScreen() {
            const content = document.getElementById('gameContent');
            content.innerHTML = `
                <div class="start-screen">
                    <div style="font-size: 6em; margin-bottom: 30px;">ğŸŒğŸš€âœ¨</div>
                    <h2>Welkom Digital World Explorer!</h2>
                    <p>Word een echte digitale wereldreiziger! Leer hoe je slim, veilig en bewust kunt navigeren door de digitale wereld. Van zoeken op internet tot veilig gamen - jij wordt de baas over technologie!</p>
                    <p>ğŸ¯ <strong>Missie:</strong> Voltooi alle ${levels.length} levels en word een Digital World Master!</p>
                    <button class="start-btn" onclick="startGame()">ğŸš€ Start de Ontdekkingsreis!</button>
                    ${completedLevels.length > 0 ? `<br><button class="next-btn" onclick="continueGame()">ğŸ“– Verder waar ik was</button>` : ''}
                </div>
            `;
        }

        function startGame() {
            currentLevel = 1;
            questionsAnswered = 0;
            gameStats.startTime = new Date();
            showLevel(1);
        }

        function continueGame() {
            if (completedLevels.length === levels.length) {
                showCelebration();
            } else {
                showLevel(completedLevels.length + 1);
            }
        }

        function showLevel(levelNum) {
            currentLevel = levelNum;
            const level = levels[levelNum - 1];
            questionsAnswered = 0;
            totalQuestions = level.questions.length;
            questionAttempts = {};
            
            updateProgress();
            updateLevelNavigation();
            
            const content = document.getElementById('gameContent');
            content.innerHTML = `
                <div class="level-icon" style="color: ${level.color}">${level.icon}</div>
                <h2 class="level-title" style="color: ${level.color}">Level ${level.id}: ${level.title}</h2>
                
                <div class="explanation" style="border-left-color: ${level.color}">
                    ${level.explanation}
                </div>

                <div class="digital-section">
                    <h3 class="digital-title">ğŸ§  Test je digitale kennis!</h3>
                    ${level.questions.map((q, index) => `
                        <div class="question" id="question-${index}">
                            <h3>Vraag ${index + 1}: ${q.question}</h3>
                            ${q.answers.map((answer, answerIndex) => `
                                <button class="answer-btn" onclick="checkAnswer(this, ${answer.correct}, ${index})">${answer.text}</button>
                            `).join('')}
                            <div class="question-hint" id="hint-${index}">
                                <strong>ğŸ’¡ Tip:</strong> ${getHintForQuestion(q.question)}
                            </div>
                            <div class="retry-message" id="retry-${index}">
                                ğŸŒŸ Probeer het nog een keer! Jij wordt een echte digital explorer!
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function checkAnswer(button, isCorrect, questionIndex) {
            const question = document.getElementById(`question-${questionIndex}`);
            const buttons = question.querySelectorAll('.answer-btn');
            const hint = document.getElementById(`hint-${questionIndex}`);
            const retry = document.getElementById(`retry-${questionIndex}`);
            
            // Track attempts
            if (!questionAttempts[questionIndex]) {
                questionAttempts[questionIndex] = 0;
            }
            questionAttempts[questionIndex]++;
            gameStats.totalAttempts++;
            
            // Disable all buttons
            buttons.forEach(btn => btn.disabled = true);
            
            if (isCorrect) {
                button.classList.add('correct');
                gameStats.correctAnswers++;
                questionsAnswered++;
                
                // Check if level is complete
                if (questionsAnswered === totalQuestions) {
                    completedLevels.push(currentLevel);
                    saveProgress();
                    updateExplorerRank();
                    
                    setTimeout(() => {
                        if (currentLevel === levels.length) {
                            showCelebration();
                        } else {
                            showReward();
                        }
                    }, 1000);
                }
            } else {
                button.classList.add('incorrect');
                
                // Show hint after first wrong answer
                if (questionAttempts[questionIndex] === 1) {
                    hint.style.display = 'block';
                }
                
                // Show retry message and re-enable buttons after 2 seconds
                retry.style.display = 'block';
                setTimeout(() => {
                    buttons.forEach(btn => {
                        btn.disabled = false;
                        btn.classList.remove('incorrect');
                    });
                    retry.style.display = 'none';
                }, 2000);
            }
        }

        function getHintForQuestion(questionText) {
            const hints = {
                "informatie over olifanten": "Websites die informatie verkopen willen vaak iets van je - echte info-websites zoals Wikipedia zijn gratis.",
                "cookies wilt accepteren": "Alleen de cookies accepteren die echt nodig zijn voor de website - niet alle tracking cookies.",
                "BESTE TELEFOON OOIT": "Als iets te goed lijkt om waar te zijn, is het meestal reclame.",
                "vraagt waar je woont": "In games praat je alleen over het spel - nooit over persoonlijke dingen.",
                "iPad van je oma": "Respect voor andermans privacy - alleen doen wat je mag.",
                "steeds enge video's": "Jij bepaalt wat je kijkt - zoek zelf naar leuke video's.",
                "regenboog-eenhoorn": "Als iets te gek lijkt om waar te zijn, is het dat meestal ook niet.",
                "echte naam en adres": "Vraag jezelf af: waarom heeft dit spelletje mijn adres nodig?",
                "wordt er bang van": "Jij bent de baas over wat je kijkt - als iets eng is, mag je altijd stoppen.",
                "100 diamanten voor â‚¬0,99": "Wiens geld zou je uitgeven? Altijd eerst vragen aan ouders."
            };
            
            for (let key in hints) {
                if (questionText.toLowerCase().includes(key)) {
                    return hints[key];
                }
            }
            return "Denk goed na over wat je hebt geleerd in dit level!";
        }

        function showReward() {
            const level = levels[currentLevel - 1];
            const firstTryCorrect = Object.values(questionAttempts).filter(attempts => attempts === 1).length;
            const badgeEarned = firstTryCorrect === totalQuestions;
            
            document.getElementById('rewardIcon').textContent = badgeEarned ? 'ğŸ†' : 'ğŸ‰';
            document.getElementById('rewardTitle').textContent = badgeEarned ? 'Level Gemeesterd! ğŸ‰' : 'Level Voltooid!';
            
            if (badgeEarned) {
                document.getElementById('rewardText').innerHTML = `Je hebt de "${level.badge}" badge verdiend! ${level.icon}`;
                document.getElementById('rewardSubText').innerHTML = `Super! Je begreep ${firstTryCorrect} van de ${totalQuestions} vragen meteen goed!`;
            } else {
                document.getElementById('rewardText').innerHTML = `Je hebt level ${currentLevel} voltooid! ğŸ¯`;
                document.getElementById('rewardSubText').innerHTML = `Je hebt veel geleerd! Probeer vragen de volgende keer in Ã©Ã©n keer goed voor een badge.`;
            }
            
            document.getElementById('rewardButtons').innerHTML = `
                <button class="next-btn" onclick="closeReward(); showLevel(${currentLevel + 1});">ğŸš€ Naar Level ${currentLevel + 1}!</button>
                <br><button class="next-btn" onclick="closeReward(); showStartScreen();">ğŸ  Terug naar Start</button>
            `;
            
            document.getElementById('rewardPopup').classList.add('show');
            document.getElementById('overlay').classList.add('show');
        }

        function showCelebration() {
            gameStats.timeSpent = Math.round((new Date() - gameStats.startTime) / 60000);
            const accuracy = Math.round((gameStats.correctAnswers / gameStats.totalAttempts) * 100);
            
            explorerRank = "ğŸŒŸ Digital World Master";
            saveProgress();
            updateExplorerRank();
            
            // Notify parent window of completion
            if (window.parent && window.parent !== window) {
                window.parent.postMessage({
                    type: 'moduleCompleted',
                    module: 'digital-world',
                    moduleName: 'Digital World Explorer'
                }, '*');
            }
            
            const content = document.getElementById('gameContent');
            content.innerHTML = `
                <div class="celebration">
                    <div style="font-size: 6em; margin-bottom: 30px;">ğŸ‰ğŸŒğŸ‰</div>
                    <h2 style="color: #667eea; font-size: 3em; margin-bottom: 30px;">GEFELICITEERD!</h2>
                    
                    <div class="certificate">
                        <h3 style="font-size: 2.5em; margin-bottom: 20px;">ğŸŒŸ DIGITAL WORLD MASTER CERTIFICAAT ğŸŒŸ</h3>
                        <p style="font-size: 1.5em; margin-bottom: 15px;">Dit certificaat wordt uitgereikt aan:</p>
                        <h2 style="font-size: 2em; margin-bottom: 20px;">Digital World Explorer</h2>
                        <p style="font-size: 1.2em;">Voor het succesvol voltooien van alle digitale geletterdheid levels<br>
                        en het behalen van de Digital World Master status!</p>
                        <p style="margin-top: 20px; font-size: 1em;">ğŸŒ Je bent nu een echte digitale wereldreiziger! ğŸŒ</p>
                    </div>

                    <div style="display: flex; justify-content: space-around; margin: 30px 0;">
                        <div style="text-align: center;">
                            <div style="font-size: 2em; font-weight: bold; color: #667eea;">${completedLevels.length}/10</div>
                            <div>Levels Voltooid</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2em; font-weight: bold; color: #667eea;">${accuracy}%</div>
                            <div>Nauwkeurigheid</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2em; font-weight: bold; color: #667eea;">${gameStats.timeSpent}</div>
                            <div>Minuten Gespeeld</div>
                        </div>
                    </div>

                    <button class="start-btn" onclick="showStartScreen()">ğŸ  Terug naar Start</button>
                </div>
            `;
        }

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const progress = (completedLevels.length / levels.length) * 100;
            progressFill.style.width = progress + '%';
        }

        function updateLevelNavigation() {
            const navigation = document.getElementById('levelNavigation');
            navigation.innerHTML = levels.map((level, index) => {
                const levelNum = index + 1;
                const isCompleted = completedLevels.includes(levelNum);
                const isActive = levelNum === currentLevel;
                const isAccessible = levelNum <= completedLevels.length + 1;
                
                return `<button class="level-nav-btn ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}" 
                    onclick="${isAccessible ? `showLevel(${levelNum})` : 'void(0)'}" 
                    ${!isAccessible ? 'disabled' : ''}>
                    ${level.icon} ${levelNum}
                </button>`;
            }).join('');
        }

        function updateExplorerRank() {
            const completedCount = completedLevels.length;
            let newRank = explorerRanks.find(rank => completedCount >= rank.min && completedCount <= rank.max);
            
            if (newRank) {
                explorerRank = newRank.name;
                document.getElementById('explorerRank').innerHTML = `
                    <span>${newRank.icon}</span>
                    <span>${explorerRank}</span>
                `;
            }
        }

        function saveProgress() {
            localStorage.setItem('digital-explorer-progress', JSON.stringify({
                completed: completedLevels,
                current: currentLevel,
                rank: explorerRank,
                stats: gameStats
            }));
        }

        function closeReward() {
            document.getElementById('rewardPopup').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');
        }

        function showHelper() {
            alert('ğŸ’¡ Tips voor Digital World Explorer:\n\n' +
                'ğŸ” Zoek altijd op betrouwbare websites\n' +
                'ğŸª Accepteer alleen noodzakelijke cookies\n' +
                'ğŸ“º Herken reclame aan labels zoals "Ad"\n' +
                'ğŸ® Praat in games alleen over het spel\n' +
                'ğŸ“± Respecteer andermans privacy\n' +
                'ğŸ¤– Jij bepaalt wat je kijkt op YouTube\n' +
                'ğŸ•µï¸ Vraag je af: is dit logisch?\n' +
                'ğŸ“Š Geef alleen info met toestemming ouders\n' +
                'ğŸ“º Stop met kijken als iets eng is\n' +
                'ğŸ’° Vraag altijd eerst voordat je iets koopt');
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>